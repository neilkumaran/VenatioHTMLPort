<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Venatio</title>
    <link rel="stylesheet" href="./style.css" />
    <link rel="icon" href="/assets/logo-DV-UgN8t.png">
    <script src="./main.js"></script>
</head>

<body>
    <!-- script for our custom earth shading so our king pranav is happy-->
    <!-- shaders uses glsl, basically opengl's way of shading that Three.js supports, which NOBODY KNOWS-->

    <script id="earthVertexShader" type="x-shader/x-vertex">
            //varying means the value is passed in the both the vertex and fragment shader, so a vector3 is passed to the fragment shader
            varying vec3 varyNormal;
            varying vec3 varyPosition;
            varying vec2 varyUv;

            void main() {
                //basically prevents the model from being distorted, when orbitControls are used
                varyNormal = normalize(normalMatrix * normal);

                //position of the vertex in the world space (where the earth is)
                varyPosition = vec3(modelViewMatrix * vec4(position, 1.0));
                varyUv = uv;
                //gets the final position for the rendering
                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
            }
        </script>
    <!-- fragment shader deals with colors, while vertex is for points on the 3d shape-->
    <script id="earthFragmentShader" type="x-shader/x-fragment">
            uniform sampler2D dayTexture;
            uniform sampler2D nightTexture;
            uniform vec3 lightDirection;
            uniform vec2 resolution;
            varying vec3 varyNormal;
            varying vec3 varyPosition;
            varying vec2 varyUv;
        
            void main() {
                float dotData = dot(varyNormal, lightDirection);
                //takes info abt the light and the normal of the vertex to calculate the brightness of the vertex
                float blendFactor = smoothstep(-0.35, 0.35, dotData); 

                //gets brightness of the current vertex
                vec4 dayColor = texture2D(dayTexture, varyUv);
                vec4 nightColor = texture2D(nightTexture, varyUv);

                //blends the textures, so it looks muy bueno
                gl_FragColor = mix(nightColor, dayColor, blendFactor);
            }
        </script>
    <script id="moonVertexShader" type="x-shader/x-vertex">
            varying vec3 vNormal;
            varying vec2 vUv;
            varying vec3 vWorldNormal;
        
            void main() {
                vUv = uv;
                vNormal = normal;
                // Transform the normal to world space
                vWorldNormal = (modelMatrix * vec4(normal, 0.0)).xyz;
                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
            }
        </script>
    <script id="moonFragmentShader" type="x-shader/x-fragment">
        uniform sampler2D moonTexture;
        uniform vec3 lightDirection;
        
        varying vec3 vNormal;
        varying vec2 vUv;
        varying vec3 vWorldNormal;
        
        void main() { 
            vec4 texColor = texture2D(moonTexture, vUv);
            float lightIntensity = max(0.0, dot(-vNormal, lightDirection));
            float ambientLight = 0.02;  
            float shadowMultiplier = 0.15;  
              
            float smoothTransition = smoothstep(0.0, 0.8, lightIntensity);
            float finalLight = ambientLight + smoothTransition * (1.0 - ambientLight);
            vec3 finalColor = texColor.rgb * mix(shadowMultiplier, 1.0, finalLight);
            
            gl_FragColor = vec4(finalColor, 1.0);
        }
        </script> 

    <canvas id="c"></canvas>
    <div id="menu-container">
        <div id="tab" onclick="toggleMenu()">&#9776; Menu</div>
        <div id="boundary">
            <h3 id="controlMenuTitle">Control Menu</h3>
            <div class="button-container">
                <button id="earthButton">Go to Earth</button>
                <button id="moonButton">Go to Moon</button>
                <input id="rocketInput" type="number" min="1" max="20" value="10" placeholder="Rocket Speed">
                <button id="button4">Button 4</button>
            </div>
        </div>
    </div>
    <script>
        function toggleMenu() {
            const menu = document.getElementById('boundary');
            menu.classList.toggle('open');
        }
    </script>
</body>

</html>
